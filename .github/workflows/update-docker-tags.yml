name: Update docker tags
on:
  push:
    tags:
      - "*"
  schedule:
    - cron: '0 5 * * *' # run every 5 hours
  repository_dispatch:
    types: [ update-docker-tags ]

jobs:
  update-docker-tags:
    runs-on: ubuntu-latest
    name: A job to update docker image tags
    steps:
      - name: Checkout
        uses: actions/checkout@v2.2
      - name: update-tags
        uses: actions/setup-go@v2
        with:
          go-version: 1.14
      - run: go build -o update-docker-tags update-docker-tags.go && ./update-docker-tags Dockerfile
      - name: pull-request
        uses: repo-sync/pull-request@v2
        with:
          github_token: ${{ secrets.GITHUB_TOKEN }}
          title: Example PR
          body: |
            This PR was autogenerated by the Update Docker Tags github action






